<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Guessing Game</title>
    <link rel="stylesheet" href="framework/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 100px; /* 100px margin added */
        }
        input, button {
            margin-top: 10px;
            padding: 5px;
        }
        #result {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
        #guessCount {
            font-weight: bold;
        }
        .guess-container {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            margin-top: 20px;
        }
        .guess-entry {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 5px;
        }
        .category {
            padding: 10px;
            font-size: 1.2em;
            font-weight: bold;
            width: 200px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            text-align: center;
        }
        .correct { background-color: lightgreen; }
        .wrong { background-color: lightcoral; }
        .guess-name {
            font-weight: bold;
            width: 200px;
            text-align: center;
        }
        @keyframes confetti {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: red;
            opacity: 1;
            animation: confetti 3s linear forwards;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        .shake {
            display: inline-block;
            animation: shake 0.5s ease-in-out;
        }

    </style>
</head>
<body>
    <h1>Cookie Guessing Game</h1>
    <p>Enter your guess:</p>
    <input type="text" id="guessInput">
    <button onclick="checkGuess()">Submit</button>
    <p id="result"></p>
    <p id="guessCount">Guesses: 0</p>
    <div class="guess-container" id="categories"></div>

    <script>
        const cookies = {
            "Burning Spice Cookie": { role: "Charge", rarity: "Beast", position: "Front" },
            "Moon Rabbit Cookie": { role: "Defense", rarity: "Epic", position: "Front" },
            "Tea Knight Cookie": { role: "Charge", rarity: "Epic", position: "Front" },
            "Dark Cacao Cookie": { role: "Charge", rarity: "Ancient", position: "Rear" },
            "Hollyberry Cookie": { role: "Defense", rarity: "Ancient", position: "Front" },
            "Pure Vanilla Cookie": { role: "Healing", rarity: "Ancient", position: "Rear" },
            "Black Pearl Cookie": { role: "Ambush", rarity: "Legendary", position: "Middle" },
            "Clotted Cream Cookie": { role: "Magic", rarity: "Super Epic", position: "Middle" },
            "Affogato Cookie": { role: "Magic", rarity: "Epic", position: "Middle" },
            "Wildberry Cookie": { role: "Defense", rarity: "Epic", position: "Front" },
            "Stardust Cookie": { role: "Ambush", rarity: "Super Epic", position: "Middle" }
        };

        const cookieNames = Object.keys(cookies);
        let answerCookie = cookieNames[Math.floor(Math.random() * cookieNames.length)];
        let guessCount = 0;

        function checkGuess() {
            const guess = document.getElementById("guessInput").value;
            const resultElement = document.getElementById("result");
            const guessCountElement = document.getElementById("guessCount");
            const categoriesElement = document.getElementById("categories");
            guessCount++;

            if (cookies[guess]) {
                if (guess === answerCookie) {
                    resultElement.innerHTML = `<span class='shake'>Congrats! The answer was ${answerCookie}</span>`;
                    guessCountElement.innerText = `Total guesses: ${guessCount}`;
                    triggerConfetti();
                    setTimeout(() => location.reload(), 3000);
                    return;
                }
                const answerData = cookies[answerCookie];
                const guessData = cookies[guess];
                
                const roleCorrect = guessData.role === answerData.role;
                const rarityCorrect = guessData.rarity === answerData.rarity;
                const positionCorrect = guessData.position === answerData.position;
                
                displayGuess(guess, guessData, roleCorrect, rarityCorrect, positionCorrect);
            } else {
                resultElement.innerText = "Invalid cookie name!";
            }
            guessCountElement.innerText = `Guesses: ${guessCount}`;
        }

        function displayGuess(guess, guessData, roleCorrect, rarityCorrect, positionCorrect) {
            const categoriesElement = document.getElementById("categories");
            const guessEntry = document.createElement("div");
            guessEntry.className = "guess-entry";
            
            const nameDiv = document.createElement("div");
            nameDiv.className = "guess-name";
            nameDiv.innerText = guess;
            guessEntry.appendChild(nameDiv);

            addCategoryBox(guessEntry, "Role", guessData.role, roleCorrect);
            addCategoryBox(guessEntry, "Rarity", guessData.rarity, rarityCorrect);
            addCategoryBox(guessEntry, "Position", guessData.position, positionCorrect);
            
            categoriesElement.prepend(guessEntry);
        }

        function addCategoryBox(parent, label, guessedValue, isCorrect) {
            const div = document.createElement("div");
            div.className = `category ${isCorrect ? "correct" : "wrong"}`;
            div.innerText = `${label}: ${guessedValue}`;
            parent.appendChild(div);
            
            setTimeout(() => {
                div.style.opacity = 1;
            }, 500);
        }

        function triggerConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement("div");
                confetti.className = "confetti";
                confetti.style.left = Math.random() * 100 + "vw";
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 5000);
            }
        }
    </script>
</body>
</html>
